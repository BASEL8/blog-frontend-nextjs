{"version":3,"file":"static/webpack/static/development/pages/admin.js.b11d25358727649fe159.hot-update.js","sources":["webpack:///./components/admin/analysers/TagsAnalyser.jsx","webpack:///./node_modules/color-hash/lib/bkdr-hash.js","webpack:///./node_modules/color-hash/lib/color-hash.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { getTags } from '../../../actions/tag'\nimport { getTagsData } from '../../../actions/admin'\nimport { getCookie } from '../../../actions/auth'\nimport {Doughnut} from 'react-chartjs-2';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport ColorHash from 'color-hash'\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\nexport default () => {\n    const colorHash = new ColorHash();\n  const classes = useStyles();\n  const [month_, setMonth] = React.useState(11);\n  const [year_, setYear] = React.useState(2019);\n  const [chartData, setChartData] = useState([])\n  const token = getCookie('token')\n  useEffect(() => {\n    getTags().then(tags => {\n      if (tags.error) {\n        return console.log(tags.error)\n      }\n      return tags\n    }).then(tags => { \n      if (tags) { \n        getTagsData(token, month_, year_).then((res) => { \n          if (res.error) {\n            console.log(res.error)\n          }\n          else { \n            const result = [res, tags].reduce((a, b) => a.map((c, i) => Object.assign({}, c, b[i])));\n            setChartData(result)\n\n          }\n        })\n      }\n    })\n  }, [month_, year_])\n  return (\n    <>\n      <Doughnut data={{\n\tlabels: chartData.map(({name},i)=>name),\n\tdatasets: [{\n\t\tdata:chartData.map(({count},i)=>count),\n\t\tbackgroundColor: [\n\t\t'#FF6384',\n\t\t'#36A2EB',\n\t\t'#FFCE56'\n\t\t],\n\t\thoverBackgroundColor: [\n\t\t'#FF6384',\n\t\t'#36A2EB',\n\t\t'#FFCE56'\n\t\t]\n\t}]\n}} />\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"demo-simple-select-label\">chose Month</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={month_}\n          onChange={(event) => setMonth(parseInt(event.target.value))}\n        >\n          {['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].map((month, i) => <MenuItem key={i} value={i + 1}>{month}</MenuItem>)}\n        </Select>\n      </FormControl>\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"demo-simple-select-label\">chose Month</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={year_}\n          onChange={(event) => setYear(parseInt(event.target.value))}\n        >\n          {Array(10).fill('').map((month, i) => <MenuItem key={i} value={2019 + i}>{2019 + i}</MenuItem>)}\n        </Select>\n      </FormControl>\n    </>\n  )\n};","/**\n * BKDR Hash (modified version)\n *\n * @param {String} str string to hash\n * @returns {Number}\n */\nvar BKDRHash = function(str) {\n    var seed = 131;\n    var seed2 = 137;\n    var hash = 0;\n    // make hash more sensitive for short string like 'a', 'b', 'c'\n    str += 'x';\n    // Note: Number.MAX_SAFE_INTEGER equals 9007199254740991\n    var MAX_SAFE_INTEGER = parseInt(9007199254740991 / seed2);\n    for(var i = 0; i < str.length; i++) {\n        if(hash > MAX_SAFE_INTEGER) {\n            hash = parseInt(hash / seed2);\n        }\n        hash = hash * seed + str.charCodeAt(i);\n    }\n    return hash;\n};\n\nmodule.exports = BKDRHash;\n","var BKDRHash = require('./bkdr-hash');\n\n/**\n * Convert RGB Array to HEX\n *\n * @param {Array} RGBArray - [R, G, B]\n * @returns {String} 6 digits hex starting with #\n */\nvar RGB2HEX = function(RGBArray) {\n    var hex = '#';\n    RGBArray.forEach(function(value) {\n        if (value < 16) {\n            hex += 0;\n        }\n        hex += value.toString(16);\n    });\n    return hex;\n};\n\n/**\n * Convert HSL to RGB\n *\n * @see {@link http://zh.wikipedia.org/wiki/HSL和HSV色彩空间} for further information.\n * @param {Number} H Hue ∈ [0, 360)\n * @param {Number} S Saturation ∈ [0, 1]\n * @param {Number} L Lightness ∈ [0, 1]\n * @returns {Array} R, G, B ∈ [0, 255]\n */\nvar HSL2RGB = function(H, S, L) {\n    H /= 360;\n\n    var q = L < 0.5 ? L * (1 + S) : L + S - L * S;\n    var p = 2 * L - q;\n\n    return [H + 1/3, H, H - 1/3].map(function(color) {\n        if(color < 0) {\n            color++;\n        }\n        if(color > 1) {\n            color--;\n        }\n        if(color < 1/6) {\n            color = p + (q - p) * 6 * color;\n        } else if(color < 0.5) {\n            color = q;\n        } else if(color < 2/3) {\n            color = p + (q - p) * 6 * (2/3 - color);\n        } else {\n            color = p;\n        }\n        return Math.round(color * 255);\n    });\n};\n\n/**\n * Color Hash Class\n *\n * @class\n */\nvar ColorHash = function(options) {\n    options = options || {};\n\n    var LS = [options.lightness, options.saturation].map(function(param) {\n        param = param || [0.35, 0.5, 0.65]; // note that 3 is a prime\n        return Object.prototype.toString.call(param) === '[object Array]' ? param.concat() : [param];\n    });\n\n    this.L = LS[0];\n    this.S = LS[1];\n\n    this.hash = options.hash || BKDRHash;\n};\n\n/**\n * Returns the hash in [h, s, l].\n * Note that H ∈ [0, 360); S ∈ [0, 1]; L ∈ [0, 1];\n *\n * @param {String} str string to hash\n * @returns {Array} [h, s, l]\n */\nColorHash.prototype.hsl = function(str) {\n    var H, S, L;\n    var hash = this.hash(str);\n\n    H = hash % 359; // note that 359 is a prime\n    hash = parseInt(hash / 360);\n    S = this.S[hash % this.S.length];\n    hash = parseInt(hash / this.S.length);\n    L = this.L[hash % this.L.length];\n\n    return [H, S, L];\n};\n\n/**\n * Returns the hash in [r, g, b].\n * Note that R, G, B ∈ [0, 255]\n *\n * @param {String} str string to hash\n * @returns {Array} [r, g, b]\n */\nColorHash.prototype.rgb = function(str) {\n    var hsl = this.hsl(str);\n    return HSL2RGB.apply(this, hsl);\n};\n\n/**\n * Returns the hash in hex\n *\n * @param {String} str string to hash\n * @returns {String} hex with #\n */\nColorHash.prototype.hex = function(str) {\n    var rgb = this.rgb(str);\n    return RGB2HEX(rgb);\n};\n\nmodule.exports = ColorHash;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AADA;AALA;AAAA;AASA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAKA;AAPA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;;;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}