{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/components/Profile/Private.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { userList } from '../../actions/blog';\nimport { getUserProfile, updateProfile, getProfilePhoto } from '../../actions/user';\nimport { isAuth, getCookie, updateUser, delateMyAccount, removeCookie, removeLocalStorage } from '../../actions/auth';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Tabs from './Tabs';\nimport UpdateProfile from './UpdateProfile';\nimport { arrayBufferToBase64 } from '../../actions/helpers';\nimport Router from 'next/router';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: '90%',\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  },\n  buttons: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1)\n  }\n}));\n\nconst PrivetProfile = () => {\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const classes = useStyles();\n  const token = getCookie('token');\n  const {\n    0: blogs,\n    1: setBlogs\n  } = useState([]);\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    username: '',\n    name: '',\n    email: '',\n    role: 0,\n    password: '',\n    error: false,\n    success: false,\n    loading: false,\n    photo: '',\n    userData: '',\n    about: ''\n  });\n  const {\n    username,\n    name,\n    email,\n    error,\n    photo,\n    userData,\n    role,\n    about\n  } = values;\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const updateProfile_ = () => {\n    setValues(_objectSpread({}, values, {\n      loading: true\n    }));\n    updateProfile(token, userData).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n        return console.log(data.error);\n      }\n\n      const {\n        name,\n        email,\n        role,\n        username,\n        photo,\n        about\n      } = data;\n      updateUser(data, () => {\n        setValues(_objectSpread({}, values, {\n          name,\n          email,\n          role,\n          username,\n          photo,\n          about,\n          loading: false,\n          success: true,\n          error: false\n        }));\n      });\n      handleClose();\n    });\n  };\n\n  const handleDelete = () => {\n    const user = isAuth();\n    delateMyAccount(token, user).then(res => {\n      console.log(res);\n\n      if (res.error) {\n        return console.log(error);\n      }\n\n      if (res.deleted) {\n        removeCookie('token');\n        removeLocalStorage('user');\n        Router.push('/');\n      }\n    });\n  };\n\n  useEffect(() => {\n    setValues(_objectSpread({}, values, {\n      userData: new FormData()\n    }));\n    getUserProfile(token).then(data => {\n      setValues(_objectSpread({}, values, {\n        loading: true\n      }));\n\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      }\n\n      const {\n        name,\n        email,\n        role,\n        username,\n        photo,\n        about\n      } = data;\n      setValues(_objectSpread({}, values, {\n        name,\n        email,\n        role,\n        username,\n        about,\n        error: false,\n        success: false,\n        loading: false,\n        photo\n      }));\n    });\n    userList(token, isAuth()).then(res => setBlogs(res));\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      height: 100,\n      width: 100,\n      overflow: 'hidden'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    alt: \"\",\n    style: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'cover',\n      borderRadius: '50%'\n    },\n    src: photo.data ? 'data:image/jpeg;base64,' + arrayBufferToBase64(photo.data.data) : `https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80`,\n    alt: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  })), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Name : \", name), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"User name : \", username), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Email : \", email), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"About : \", about), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Admin : \", role === 1 ? 'yes' : 'no'), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(Button, {\n    onClick: handleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Update\"), __jsx(Button, {\n    onClick: handleDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \" delete my account \")), __jsx(Modal, {\n    disablePortal: true,\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: open,\n    onClose: handleClose,\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    id: \"simple-modal-title\",\n    className: classes.buttons,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Update\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, __jsx(UpdateProfile, {\n    values: values,\n    setValues: setValues,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, __jsx(Button, {\n    variant: \"outlined\",\n    className: classes.buttons,\n    onClick: () => updateProfile_(),\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Update\"), __jsx(Button, {\n    variant: \"outlined\",\n    className: classes.buttons,\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Cancel\")))), __jsx(Tabs, {\n    blogs: blogs,\n    token: token,\n    setBlogs: setBlogs,\n    username: username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  })));\n};\n\nexport default PrivetProfile;","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/components/Profile/Private.jsx"],"names":["React","useState","useEffect","userList","getUserProfile","updateProfile","getProfilePhoto","isAuth","getCookie","updateUser","delateMyAccount","removeCookie","removeLocalStorage","Button","makeStyles","Modal","Tabs","UpdateProfile","arrayBufferToBase64","Router","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","buttons","marginLeft","marginRight","PrivetProfile","open","setOpen","classes","token","blogs","setBlogs","values","setValues","username","name","email","role","password","error","success","loading","photo","userData","about","handleOpen","handleClose","updateProfile_","then","data","console","log","handleDelete","user","res","deleted","push","FormData","height","overflow","objectFit","borderRadius","display","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { userList } from '../../actions/blog'\nimport { getUserProfile, updateProfile,getProfilePhoto } from '../../actions/user'\nimport { isAuth, getCookie, updateUser, delateMyAccount, removeCookie, removeLocalStorage } from '../../actions/auth'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Tabs from './Tabs'\nimport UpdateProfile from './UpdateProfile'\nimport { arrayBufferToBase64 } from '../../actions/helpers'\nimport Router from 'next/router'\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: '90%',\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  buttons: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  }\n}));\n\n\nconst PrivetProfile = () => {\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  const token = getCookie('token')\n  const [blogs, setBlogs] = useState([])\n  const [values, setValues] = useState({ username: '', name: '', email: '', role: 0, password: '', error: false, success: false, loading: false, photo: '', userData:'', about: '' })\n  const { username, name, email, error, photo, userData, role, about } = values;\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const updateProfile_ = () => {\n    setValues({ ...values, loading: true })\n    updateProfile(token, userData).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error })\n        return console.log(data.error)\n      }\n      const { name, email, role, username, photo, about } = data\n      updateUser(data, () => {\n        setValues({ ...values, name, email, role, username, photo, about, loading: false, success: true, error: false })\n      })\n      handleClose()\n    })\n\n  }\n  const handleDelete = () => {\n    const user = isAuth()\n    delateMyAccount(token, user).then(res => {\n      console.log(res)\n      if (res.error) {\n        return console.log(error)\n      }\n      if (res.deleted) {\n        removeCookie('token')\n        removeLocalStorage('user')\n        Router.push('/')\n      }\n    })\n  }\n  useEffect(() => {\n     setValues({ ...values, userData : new FormData()})\n    getUserProfile(token).then(data => {\n      setValues({ ...values, loading: true })\n      if (data.error) {\n        setValues({ ...values, error: data.error })\n      }\n      const { name, email, role, username, photo, about } = data;\n      setValues({ ...values, name, email, role, username, about, error: false, success: false, loading: false ,photo});\n    })\n    userList(token, isAuth()).then(res => setBlogs(res))\n  }, [])\n  return (\n    <>\n      <div>\n        <div style={{ height: 100, width: 100, overflow: 'hidden' }}>\n          <img alt=\"\" style={{ height: '100%', width: '100%', objectFit: 'cover', borderRadius: '50%' }}      \n          src={ photo.data?'data:image/jpeg;base64,' + arrayBufferToBase64( photo.data.data) :\n                          `https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80`} \n                          alt={name} />\n        </div>\n        <p>Name : {name}</p>\n        <p>User name : {username}</p>\n        <p>Email : {email}</p>\n        <p>About : {about}</p>\n        <p>Admin : {role === 1 ? 'yes' : 'no'}</p>\n        <div>\n          <Button onClick={handleOpen}>Update</Button>\n          <Button onClick={handleDelete}> delete my account </Button>\n        </div>\n        <Modal\n          disablePortal={true}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          open={open}\n          onClose={handleClose}\n          style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n        >\n          <div className={classes.paper}>\n            <h2 id=\"simple-modal-title\" className={classes.buttons}>Update</h2>\n            <div>\n              < UpdateProfile values={values} setValues={setValues} />\n            </div>\n            <div>\n              <Button variant=\"outlined\" className={classes.buttons} onClick={() => updateProfile_()} color=\"primary\">Update</Button>\n              <Button variant=\"outlined\" className={classes.buttons} onClick={handleClose}>Cancel</Button>\n            </div>\n          </div>\n        </Modal>\n        <Tabs blogs={blogs} token={token} setBlogs={setBlogs} username={username} />\n      </div>\n    </>\n  )\n}\nexport default PrivetProfile;"]},"metadata":{},"sourceType":"module"}