{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/components/Profile/Private.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { userList } from '../../actions/blog';\nimport { getUserProfile, updateProfile, getProfilePhoto } from '../../actions/user';\nimport { isAuth, getCookie, updateUser, delateMyAccount, removeCookie, removeLocalStorage } from '../../actions/auth';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Tabs from './Tabs';\nimport UpdateProfile from './UpdateProfile';\nimport { arrayBufferToBase64 } from '../../actions/helpers';\nimport Router from 'next/router';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    paper: {\n      position: 'absolute',\n      width: '90%',\n      backgroundColor: theme.palette.background.paper,\n      border: '2px solid #000',\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(2, 4, 3)\n    },\n    buttons: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1)\n    }\n  };\n});\n\nvar PrivetProfile = function PrivetProfile() {\n  var _jsx;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var classes = useStyles();\n  var token = getCookie('token');\n\n  var _useState2 = useState([]),\n      blogs = _useState2[0],\n      setBlogs = _useState2[1];\n\n  var _useState3 = useState({\n    username: '',\n    name: '',\n    email: '',\n    role: 0,\n    password: '',\n    error: false,\n    success: false,\n    loading: false,\n    photo: '',\n    userData: '',\n    about: ''\n  }),\n      values = _useState3[0],\n      setValues = _useState3[1];\n\n  var username = values.username,\n      name = values.name,\n      email = values.email,\n      error = values.error,\n      photo = values.photo,\n      userData = values.userData,\n      role = values.role,\n      about = values.about;\n\n  var handleOpen = function handleOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var updateProfile_ = function updateProfile_() {\n    setValues(_objectSpread({}, values, {\n      loading: true\n    }));\n    updateProfile(token, userData).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n        return console.log(data.error);\n      }\n\n      var name = data.name,\n          email = data.email,\n          role = data.role,\n          username = data.username,\n          photo = data.photo,\n          about = data.about;\n      updateUser(data, function () {\n        setValues(_objectSpread({}, values, {\n          name: name,\n          email: email,\n          role: role,\n          username: username,\n          photo: photo,\n          about: about,\n          loading: false,\n          success: true,\n          error: false\n        }));\n      });\n      handleClose();\n    });\n  };\n\n  var handleDelete = function handleDelete() {\n    var user = isAuth();\n    delateMyAccount(token, user).then(function (res) {\n      console.log(res);\n\n      if (res.error) {\n        return console.log(error);\n      }\n\n      if (res.deleted) {\n        removeCookie('token');\n        removeLocalStorage('user');\n        Router.push('/');\n      }\n    });\n  };\n\n  useEffect(function () {\n    setValues(_objectSpread({}, values, {\n      userData: new FormData()\n    }));\n    getUserProfile(token).then(function (data) {\n      setValues(_objectSpread({}, values, {\n        loading: true\n      }));\n\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      }\n\n      var name = data.name,\n          email = data.email,\n          role = data.role,\n          username = data.username,\n          photo = data.photo,\n          about = data.about;\n      setValues(_objectSpread({}, values, {\n        name: name,\n        email: email,\n        role: role,\n        username: username,\n        about: about,\n        error: false,\n        success: false,\n        loading: false,\n        photo: photo\n      }));\n    });\n    userList(token, isAuth()).then(function (res) {\n      return setBlogs(res);\n    });\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      height: 100,\n      width: 100,\n      overflow: 'hidden'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(\"img\", (_jsx = {\n    alt: \"\",\n    style: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'cover',\n      borderRadius: '50%'\n    },\n    src: photo.data ? 'data:image/jpeg;base64,' + arrayBufferToBase64(photo.data.data) : \"https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80\"\n  }, _defineProperty(_jsx, \"alt\", name), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 87\n  }), _defineProperty(_jsx, \"__self\", this), _jsx))), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Name : \", name), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"User name : \", username), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Email : \", email), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"About : \", about), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Admin : \", role === 1 ? 'yes' : 'no'), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(Button, {\n    onClick: handleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Update\"), __jsx(Button, {\n    onClick: handleDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \" delete my account \")), __jsx(Modal, {\n    disablePortal: true,\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: open,\n    onClose: handleClose,\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    id: \"simple-modal-title\",\n    className: classes.buttons,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Update\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, __jsx(UpdateProfile, {\n    values: values,\n    setValues: setValues,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, __jsx(Button, {\n    variant: \"outlined\",\n    className: classes.buttons,\n    onClick: function onClick() {\n      return updateProfile_();\n    },\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Update\"), __jsx(Button, {\n    variant: \"outlined\",\n    className: classes.buttons,\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Cancel\")))), __jsx(Tabs, {\n    blogs: blogs,\n    token: token,\n    setBlogs: setBlogs,\n    username: username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  })));\n};\n\nexport default PrivetProfile;","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/components/Profile/Private.jsx"],"names":["React","useState","useEffect","userList","getUserProfile","updateProfile","getProfilePhoto","isAuth","getCookie","updateUser","delateMyAccount","removeCookie","removeLocalStorage","Button","makeStyles","Modal","Tabs","UpdateProfile","arrayBufferToBase64","Router","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","buttons","marginLeft","marginRight","PrivetProfile","open","setOpen","classes","token","blogs","setBlogs","username","name","email","role","password","error","success","loading","photo","userData","about","values","setValues","handleOpen","handleClose","updateProfile_","then","data","console","log","handleDelete","user","res","deleted","push","FormData","height","overflow","objectFit","borderRadius","display","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { userList } from '../../actions/blog'\nimport { getUserProfile, updateProfile,getProfilePhoto } from '../../actions/user'\nimport { isAuth, getCookie, updateUser, delateMyAccount, removeCookie, removeLocalStorage } from '../../actions/auth'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Tabs from './Tabs'\nimport UpdateProfile from './UpdateProfile'\nimport { arrayBufferToBase64 } from '../../actions/helpers'\nimport Router from 'next/router'\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: '90%',\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  buttons: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  }\n}));\n\n\nconst PrivetProfile = () => {\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  const token = getCookie('token')\n  const [blogs, setBlogs] = useState([])\n  const [values, setValues] = useState({ username: '', name: '', email: '', role: 0, password: '', error: false, success: false, loading: false, photo: '', userData:'', about: '' })\n  const { username, name, email, error, photo, userData, role, about } = values;\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const updateProfile_ = () => {\n    setValues({ ...values, loading: true })\n    updateProfile(token, userData).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error })\n        return console.log(data.error)\n      }\n      const { name, email, role, username, photo, about } = data\n      updateUser(data, () => {\n        setValues({ ...values, name, email, role, username, photo, about, loading: false, success: true, error: false })\n      })\n      handleClose()\n    })\n\n  }\n  const handleDelete = () => {\n    const user = isAuth()\n    delateMyAccount(token, user).then(res => {\n      console.log(res)\n      if (res.error) {\n        return console.log(error)\n      }\n      if (res.deleted) {\n        removeCookie('token')\n        removeLocalStorage('user')\n        Router.push('/')\n      }\n    })\n  }\n  useEffect(() => {\n     setValues({ ...values, userData : new FormData()})\n    getUserProfile(token).then(data => {\n      setValues({ ...values, loading: true })\n      if (data.error) {\n        setValues({ ...values, error: data.error })\n      }\n      const { name, email, role, username, photo, about } = data;\n      setValues({ ...values, name, email, role, username, about, error: false, success: false, loading: false ,photo});\n    })\n    userList(token, isAuth()).then(res => setBlogs(res))\n  }, [])\n  return (\n    <>\n      <div>\n        <div style={{ height: 100, width: 100, overflow: 'hidden' }}>\n          <img alt=\"\" style={{ height: '100%', width: '100%', objectFit: 'cover', borderRadius: '50%' }}      \n          src={ photo.data?'data:image/jpeg;base64,' + arrayBufferToBase64( photo.data.data) :\n                          `https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80`} \n                          alt={name} />\n        </div>\n        <p>Name : {name}</p>\n        <p>User name : {username}</p>\n        <p>Email : {email}</p>\n        <p>About : {about}</p>\n        <p>Admin : {role === 1 ? 'yes' : 'no'}</p>\n        <div>\n          <Button onClick={handleOpen}>Update</Button>\n          <Button onClick={handleDelete}> delete my account </Button>\n        </div>\n        <Modal\n          disablePortal={true}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          open={open}\n          onClose={handleClose}\n          style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n        >\n          <div className={classes.paper}>\n            <h2 id=\"simple-modal-title\" className={classes.buttons}>Update</h2>\n            <div>\n              < UpdateProfile values={values} setValues={setValues} />\n            </div>\n            <div>\n              <Button variant=\"outlined\" className={classes.buttons} onClick={() => updateProfile_()} color=\"primary\">Update</Button>\n              <Button variant=\"outlined\" className={classes.buttons} onClick={handleClose}>Cancel</Button>\n            </div>\n          </div>\n        </Modal>\n        <Tabs blogs={blogs} token={token} setBlogs={setBlogs} username={username} />\n      </div>\n    </>\n  )\n}\nexport default PrivetProfile;"]},"metadata":{},"sourceType":"module"}