{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/components/admin/analysers/TagsAnalyser.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport { getTags } from '../../../actions/tag';\nimport { getTagsData } from '../../../actions/admin';\nimport { getCookie } from '../../../actions/auth';\nimport { Doughnut } from 'react-chartjs-2';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport ColorHash from 'color-hash';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2)\n    }\n  };\n});\nexport default (function () {\n  var colorHash = new ColorHash({\n    hue: [{\n      min: 30,\n      max: 90\n    }, {\n      min: 180,\n      max: 210\n    }, {\n      min: 270,\n      max: 285\n    }]\n  });\n  var classes = useStyles();\n\n  var _React$useState = React.useState(11),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      month_ = _React$useState2[0],\n      setMonth = _React$useState2[1];\n\n  var _React$useState3 = React.useState(2019),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      year_ = _React$useState4[0],\n      setYear = _React$useState4[1];\n\n  var _useState = useState([]),\n      chartData = _useState[0],\n      setChartData = _useState[1];\n\n  var token = getCookie('token');\n  useEffect(function () {\n    getTags().then(function (tags) {\n      if (tags.error) {\n        return console.log(tags.error);\n      }\n\n      return tags;\n    }).then(function (tags) {\n      if (tags) {\n        getTagsData(token, month_, year_).then(function (res) {\n          if (res.error) {\n            console.log(res.error);\n          } else {\n            var result = [res.sort(function (a, b) {\n              return a[1] + b[1];\n            }), tags.sort(function (a, b) {\n              return a[1] + b[1];\n            })].reduce(function (a, b) {\n              return a.map(function (c, i) {\n                return _Object$assign({}, c, b[i]);\n              });\n            });\n            setChartData(result);\n            console.log('res', res.sort());\n            console.log('tags', tags.sort());\n            console.log('result', result);\n          }\n        });\n      }\n    });\n  }, [month_, year_]);\n  return __jsx(React.Fragment, null, __jsx(Doughnut, {\n    data: {\n      labels: chartData.map(function (_ref, i) {\n        var name = _ref.name;\n        return name;\n      }),\n      datasets: [{\n        data: chartData.map(function (_ref2, i) {\n          var count = _ref2.count;\n          return count;\n        }),\n        backgroundColor: chartData.map(function (_ref3, i) {\n          var name = _ref3.name,\n              _id = _ref3._id;\n          return colorHash.hex(name);\n        }),\n        hoverBackgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']\n      }]\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), __jsx(FormControl, {\n    className: classes.formControl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, __jsx(InputLabel, {\n    id: \"demo-simple-select-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"chose Month\"), __jsx(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    value: month_,\n    onChange: function onChange(event) {\n      return setMonth(_parseInt(event.target.value));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].map(function (month, i) {\n    return __jsx(MenuItem, {\n      key: i,\n      value: i + 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, month);\n  }))), __jsx(FormControl, {\n    className: classes.formControl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, __jsx(InputLabel, {\n    id: \"demo-simple-select-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"chose Month\"), __jsx(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    value: year_,\n    onChange: function onChange(event) {\n      return setYear(_parseInt(event.target.value));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, Array(10).fill('').map(function (month, i) {\n    return __jsx(MenuItem, {\n      key: i,\n      value: 2019 + i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, 2019 + i);\n  }))));\n});","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/components/admin/analysers/TagsAnalyser.jsx"],"names":["useState","useEffect","getTags","getTagsData","getCookie","Doughnut","makeStyles","InputLabel","MenuItem","FormControl","Select","ColorHash","useStyles","theme","formControl","margin","spacing","minWidth","selectEmpty","marginTop","colorHash","hue","min","max","classes","React","month_","setMonth","year_","setYear","chartData","setChartData","token","then","tags","error","console","log","res","result","sort","a","b","reduce","map","c","i","labels","name","datasets","data","count","backgroundColor","_id","hex","hoverBackgroundColor","event","target","value","month","Array","fill"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { getTags } from '../../../actions/tag'\nimport { getTagsData } from '../../../actions/admin'\nimport { getCookie } from '../../../actions/auth'\nimport { Doughnut } from 'react-chartjs-2';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport ColorHash from 'color-hash'\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\nexport default () => {\n  const colorHash = new ColorHash({ hue: [{ min: 30, max: 90 }, { min: 180, max: 210 }, { min: 270, max: 285 }] });\n  const classes = useStyles();\n  const [month_, setMonth] = React.useState(11);\n  const [year_, setYear] = React.useState(2019);\n  const [chartData, setChartData] = useState([])\n  const token = getCookie('token')\n  useEffect(() => {\n    getTags().then(tags => {\n      if (tags.error) {\n        return console.log(tags.error)\n      }\n      return tags\n    }).then(tags => {\n      if (tags) {\n        getTagsData(token, month_, year_).then((res) => {\n          if (res.error) {\n            console.log(res.error)\n          }\n          else {\n            const result = [res.sort((a, b) => a[1] + b[1]), tags.sort((a, b) => a[1] + b[1])].reduce((a, b) => a.map((c, i) => Object.assign({}, c, b[i])));\n            setChartData(result)\n            console.log('res', res.sort())\n            console.log('tags', tags.sort())\n            console.log('result', result)\n          }\n        })\n      }\n    })\n  }, [month_, year_])\n  return (\n    <>\n      <Doughnut data={{\n        labels: chartData.map(({ name }, i) => name),\n        datasets: [{\n          data: chartData.map(({ count }, i) => count),\n          backgroundColor: chartData.map(({ name, _id }, i) => colorHash.hex(name)),\n          hoverBackgroundColor: [\n            '#FF6384',\n            '#36A2EB',\n            '#FFCE56'\n          ]\n        }]\n      }} />\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"demo-simple-select-label\">chose Month</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={month_}\n          onChange={(event) => setMonth(parseInt(event.target.value))}\n        >\n          {['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].map((month, i) => <MenuItem key={i} value={i + 1}>{month}</MenuItem>)}\n        </Select>\n      </FormControl>\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"demo-simple-select-label\">chose Month</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={year_}\n          onChange={(event) => setYear(parseInt(event.target.value))}\n        >\n          {Array(10).fill('').map((month, i) => <MenuItem key={i} value={2019 + i}>{2019 + i}</MenuItem>)}\n        </Select>\n      </FormControl>\n    </>\n  )\n};"]},"metadata":{},"sourceType":"module"}