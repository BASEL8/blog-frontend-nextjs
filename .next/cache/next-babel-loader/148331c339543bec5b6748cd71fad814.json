{"ast":null,"code":"var _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/pages/blogs/[slug].jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport Router, { withRouter } from 'next/router';\nimport Link from '../../src/Link';\nimport Layout from '../../components/Layout';\nimport { getCookie, isAuth } from '../../actions/auth';\nimport { singleBlog, listRelated, singleBlogPart } from \"../../actions/blog\";\nimport { API, DOMAIN, NAME, FB_APP_ID_ } from \"../../config\";\nimport { Cookie, withCookie } from 'next-cookie';\nimport moment from 'moment';\nimport renderHTML from 'react-render-html';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DisqusThread from './DisqusThread';\nimport GradeIcon from '@material-ui/icons/Grade';\nimport Card from '../../components/blog/layout/Card';\nimport { arrayBufferToBase64 } from '../../actions/helpers';\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  margin: {\n    margin: theme.spacing(1)\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  },\n  userInfo: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    marginBottom: 20\n  },\n  userPhotoHolder: {\n    background: 'green',\n    padding: 1,\n    marginRight: 10,\n    borderRadius: '50%',\n    position: 'relative',\n    zIndex: 99,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  userPhotoMain: {\n    background: 'white',\n    height: 65,\n    width: 65,\n    borderRadius: '50%',\n    zIndex: 92,\n    padding: 2,\n    overflow: 'hidden',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  userProfilePhoto: {\n    padding: 3,\n    flex: 1,\n    height: '100%',\n    width: '100%',\n    objectFit: 'cover',\n    borderRadius: '50%'\n  },\n  userProfileExtra: {\n    position: 'absolute',\n    width: 70,\n    height: 25,\n    backgroundColor: 'white',\n    zIndex: 90\n  },\n  mainImage: {\n    height: 400,\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    marginBottom: 25,\n    marginTop: 25\n  },\n  bodyHolder: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  LoginButton: {\n    width: '50%',\n    marginTop: 20\n  },\n  thumbUpHolder: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start'\n  },\n  thumbUpLogo: {\n    width: 35,\n    height: 35,\n    borderRadius: '50%',\n    border: '1px solid lightgray',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: 20,\n    padding: 3\n  }\n}));\n\nconst SinglePage = ({\n  blog,\n  query\n}) => {\n  const classes = useStyles();\n  const {\n    0: related,\n    1: setRelated\n  } = useState([]);\n  const token = getCookie('token');\n\n  const loadRelated = () => {\n    listRelated({\n      _id: blog._id,\n      categories: blog.categories\n    }).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setRelated(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadRelated();\n  }, []);\n\n  const head = () => __jsx(Head, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, __jsx(\"title\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, blog.title, \" | \", NAME), __jsx(\"meta\", {\n    name: \"description\",\n    content: blog.mdesc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), __jsx(\"link\", {\n    rel: \"canonical\",\n    href: `${DOMAIN}/blogs/${query.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:title\",\n    content: `${blog.title}| ${NAME}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:description\",\n    content: blog.mdesc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:type\",\n    content: \"webiste\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:url\",\n    content: `${DOMAIN}/blogs/${query.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:site_name\",\n    content: `${NAME}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:image\",\n    content: `${API}/blog/photo/${blog.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:image:secure_url\",\n    ccontent: `${API}/blog/photo/${blog.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:image:type\",\n    content: \"image/jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"fb:app_id\",\n    content: `${FB_APP_ID_}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }));\n\n  const showBlogCategories = blog => __jsx(ButtonGroup, {\n    size: \"small\",\n    \"aria-label\": \"small outlined button group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, blog.categories.map((c, i) => __jsx(Button, {\n    key: i,\n    onClick: () => Router.push(`/categories/${c.slug}`),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, c.name)));\n\n  const showBlogTags = blog => __jsx(ButtonGroup, {\n    size: \"small\",\n    \"aria-label\": \"small outlined button group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, blog.tags.map((c, i) => __jsx(Button, {\n    key: i,\n    onClick: () => Router.push(`/tags/${c.slug}`),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, c.name)));\n\n  const showRelatedBlog = () => {\n    return related.map((blog, i) => __jsx(Card, {\n      blog: blog,\n      small: true,\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }));\n  };\n\n  const showDisqusThread = () => {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, __jsx(DisqusThread, {\n      id: blog._id,\n      title: blog.title,\n      path: `/blog/${blog.slug}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }));\n  };\n\n  return __jsx(React.Fragment, null, head(), __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, __jsx(Hidden, {\n    mdDown: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    lg: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  })), __jsx(Grid, {\n    item: true,\n    lg: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, blog.title), __jsx(\"div\", {\n    className: classes.userInfo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.userPhotoHolder,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.userPhotoMain,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    className: classes.userProfilePhoto,\n    src: 'data:image/jpeg;base64,' + Buffer.from(blog.postedBy.photo.data.data, 'base64').toString('base64'),\n    alt: blog.postedBy && blog.postedBy.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: classes.userProfileExtra,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    style: {\n      fontSize: 13\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, __jsx(Button, {\n    onClick: () => Router.push({\n      pathname: isAuth() && isAuth().username === blog.postedBy.username ? `/profile` : `/profile/${blog.postedBy.username}`,\n      state: {\n        username: blog.postedBy.username\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, \"  written by \", blog.postedBy.name), __jsx(Button, {\n    variant: \"outlined\",\n    size: \"small\",\n    style: {\n      marginLeft: 15\n    },\n    className: classes.margin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, \"follow\")), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, moment(blog.updatedAt).fromNow(), __jsx(\"span\", {\n    style: {\n      marginLeft: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, \" \", blog.timeToRead, \" min read\")))))), __jsx(\"div\", {\n    className: classes.mainImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: `${API}/blog/photo/${blog.slug}`,\n    alt: blog.title,\n    style: {\n      width: '100%',\n      objectFit: 'scale-down'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, __jsx(\"section\", {\n    className: classes.bodyHolder,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, token ? __jsx(\"div\", {\n    className: \"blogText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, renderHTML(blog.body)) : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"blogText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, blog.excerpt), __jsx(Button, {\n    variant: \"contained\",\n    className: classes.LoginButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/auth/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"Login to read more\"))))), __jsx(\"div\", {\n    style: {\n      marginBottom: 15,\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      marginBottom: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, showBlogCategories(blog)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, showBlogTags(blog)), __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      marginTop: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'flex-start'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      width: 55,\n      height: 55,\n      borderRadius: '50%',\n      border: '1px solid lightgray',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    className: \"d-flex align-items-center justify-content-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, __jsx(GradeIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  })), __jsx(\"p\", {\n    style: {\n      marginLeft: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252\n    },\n    __self: this\n  }, \"1 star\")), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, __jsx(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    href: `http://twitter.com/share?${DOMAIN}/blogs/${blog.slug}`,\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }, \"Twitter\")), __jsx(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    href: `https://www.facebook.com/sharer/sharer.php?u=${DOMAIN}/blogs/${blog.slug}`,\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  }, \"Facebook\")), __jsx(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    href: `https://www.linkedin.com/sharing/share-offsite/?url=${DOMAIN}/blogs/${blog.slug}`,\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, \"Linkedin\")))))), __jsx(Hidden, {\n    mdDown: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    lg: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }, __jsx(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273\n    },\n    __self: this\n  }, \"Related blogs\"), __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, showRelatedBlog())), showDisqusThread()));\n};\n\nSinglePage.getInitialProps = ctx => {\n  const token = ctx.cookie.get('token');\n\n  if (token) {\n    return singleBlog(token, ctx.query.slug).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        return {\n          blog: data,\n          query: ctx.query\n        };\n      }\n    });\n  } else {\n    return singleBlogPart(ctx.query.slug).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        return {\n          blog: data,\n          query: ctx.query\n        };\n      }\n    });\n  }\n};\n\nexport default withCookie(withRouter(SinglePage));","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/pages/blogs/[slug].jsx"],"names":["useState","useEffect","Head","Router","withRouter","Link","Layout","getCookie","isAuth","singleBlog","listRelated","singleBlogPart","API","DOMAIN","NAME","FB_APP_ID_","Cookie","withCookie","moment","renderHTML","Button","ButtonGroup","makeStyles","DisqusThread","GradeIcon","Card","arrayBufferToBase64","Grid","Hidden","useStyles","theme","root","display","flexDirection","margin","spacing","extendedIcon","marginRight","userInfo","justifyContent","alignItems","marginBottom","userPhotoHolder","background","padding","borderRadius","position","zIndex","userPhotoMain","height","width","overflow","userProfilePhoto","flex","objectFit","userProfileExtra","backgroundColor","mainImage","marginTop","bodyHolder","LoginButton","thumbUpHolder","thumbUpLogo","border","SinglePage","blog","query","classes","related","setRelated","token","loadRelated","_id","categories","then","data","error","console","log","head","title","mdesc","slug","showBlogCategories","map","c","i","push","name","showBlogTags","tags","showRelatedBlog","showDisqusThread","textAlign","Buffer","from","postedBy","photo","toString","fontSize","pathname","username","state","marginLeft","updatedAt","fromNow","timeToRead","body","excerpt","getInitialProps","ctx","cookie","get"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport Head from 'next/head'\nimport Router, { withRouter } from 'next/router'\nimport Link from '../../src/Link'\nimport Layout from '../../components/Layout'\nimport { getCookie,isAuth } from '../../actions/auth'\nimport { singleBlog, listRelated, singleBlogPart } from \"../../actions/blog\";\nimport { API, DOMAIN, NAME, FB_APP_ID_ } from \"../../config\";\nimport { Cookie, withCookie } from 'next-cookie'\nimport moment from 'moment'\nimport renderHTML from 'react-render-html';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DisqusThread from './DisqusThread'\nimport GradeIcon from '@material-ui/icons/Grade';\nimport Card from '../../components/blog/layout/Card'\nimport {arrayBufferToBase64} from '../../actions/helpers'\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nconst useStyles = makeStyles(theme => ({\n  root: { display: 'flex', flexDirection: 'column' },\n  margin: {\n    margin: theme.spacing(1),\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1),\n  },\n  userInfo: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    marginBottom: 20\n  },\n  userPhotoHolder: {\n    background: 'green',\n    padding: 1,\n    marginRight: 10,\n    borderRadius: '50%',\n    position: 'relative',\n    zIndex: 99,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  userPhotoMain: {\n    background: 'white',\n    height: 65,\n    width: 65,\n    borderRadius: '50%',\n    zIndex: 92,\n    padding: 2,\n    overflow: 'hidden',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  userProfilePhoto: {\n    padding: 3,\n    flex: 1,\n    height: '100%',\n    width: '100%',\n    objectFit: 'cover',\n    borderRadius: '50%'\n  },\n  userProfileExtra: {\n    position: 'absolute',\n    width: 70,\n    height: 25,\n    backgroundColor: 'white',\n    zIndex: 90\n  },\n  mainImage: {\n    height: 400,\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    marginBottom: 25,\n    marginTop: 25\n  },\n  bodyHolder: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  LoginButton: {\n    width: '50%',\n    marginTop: 20\n  },\n  thumbUpHolder: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  thumbUpLogo: {\n    width: 35,\n    height: 35,\n    borderRadius: '50%',\n    border: '1px solid lightgray',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: 20,\n    padding: 3,\n  }\n}));\nconst SinglePage = ({ blog, query }) => {\n  const classes = useStyles();\n  const [related, setRelated] = useState([]);\n  const token = getCookie('token')\n  const loadRelated = () => {\n    listRelated({ _id: blog._id, categories: blog.categories }).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setRelated(data);\n      }\n    });\n  };\n  useEffect(() => {\n    loadRelated();\n  }, []);\n\n  const head = () => (\n    <Head>\n      <title>\n        {blog.title} | {NAME}\n      </title>\n      <meta name=\"description\" content={blog.mdesc} />\n      <link rel=\"canonical\" href={`${DOMAIN}/blogs/${query.slug}`} />\n      <meta property=\"og:title\" content={`${blog.title}| ${NAME}`} />\n      <meta property=\"og:description\" content={blog.mdesc} />\n      <meta property=\"og:type\" content=\"webiste\" />\n      <meta property=\"og:url\" content={`${DOMAIN}/blogs/${query.slug}`} />\n      <meta property=\"og:site_name\" content={`${NAME}`} />\n      <meta property=\"og:image\" content={`${API}/blog/photo/${blog.slug}`} />\n      <meta property=\"og:image:secure_url\" ccontent={`${API}/blog/photo/${blog.slug}`} />\n      <meta property=\"og:image:type\" content=\"image/jpg\" />\n      <meta property=\"fb:app_id\" content={`${FB_APP_ID_}`} />\n    </Head>\n  );\n\n  const showBlogCategories = blog => (\n    <ButtonGroup size=\"small\" aria-label=\"small outlined button group\">\n      {\n        blog.categories.map((c, i) => (\n          <Button key={i} onClick={() => Router.push(`/categories/${c.slug}`)}>\n            {c.name}\n          </Button>\n        ))\n      }\n    </ButtonGroup>\n  );\n\n  const showBlogTags = blog =>(\n    <ButtonGroup size=\"small\" aria-label=\"small outlined button group\">\n      {\n        blog.tags.map((c, i) => (\n          <Button key={i} onClick={() => Router.push(`/tags/${c.slug}`)}>\n            {c.name}\n          </Button>\n        ))\n      }\n    </ButtonGroup>\n  )\n\n  const showRelatedBlog = () => {\n    return related.map((blog, i) => (\n      <Card blog={blog} small={true}   key={i}/>\n    ));\n  };\n  const showDisqusThread = () => {\n    return (<div>\n      <DisqusThread id={blog._id} title={blog.title} path={`/blog/${blog.slug}`} />\n    </div>)\n  }\n  return (\n    <>\n      {head()}\n      <Layout>\n        <Grid  container spacing={3}>\n          <Hidden mdDown>\n          <Grid item lg={3}>\n          </Grid>\n          </Hidden>\n          <Grid  item lg={6}>\n            <div className={classes.root}>\n            <div >\n              <div>\n                <h3 style={{textAlign:'center'}}>{blog.title}</h3>\n                <div className={classes.userInfo}>\n                  <div className={classes.userPhotoHolder}>\n                    <div  className={classes.userPhotoMain}>\n                      <img  className={classes.userProfilePhoto}    \n                      src={'data:image/jpeg;base64,' + Buffer.from(blog.postedBy.photo.data.data, 'base64').toString('base64') }\n                      alt={blog.postedBy&&blog.postedBy.name}/>\n                    </div>\n                    <div className={classes.userProfileExtra}></div>\n                  </div>\n                  <div style={{ fontSize: 13 }}>\n                    <div style={{ display: 'flex',alignItems:'center' }}>\n                      <Button onClick={()=>Router.push({ pathname: isAuth() && isAuth().username === blog.postedBy.username ? `/profile` : `/profile/${blog.postedBy.username}`, state: {username:blog.postedBy.username}})}>  written by {blog.postedBy.name}</Button> \n                      <Button variant=\"outlined\" size=\"small\" style={{ marginLeft: 15 }} className={classes.margin}>follow</Button>\n                    </div>\n                    <div>\n                      {moment(blog.updatedAt).fromNow()}\n                      <span style={{marginLeft : 20}}> {blog.timeToRead} min read</span>\n                    </div>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n            <div className={classes.mainImage}>\n              <img\n                src={`${API}/blog/photo/${blog.slug}`}\n                alt={blog.title}\n                style={{ width: '100%',objectFit:'scale-down' }}    \n          />\n            </div>\n          </div>\n          <div>\n            <section  className={classes.bodyHolder}>\n              {\n                token ?\n                  <div className=\"blogText\">{renderHTML(blog.body)}</div>\n                  :\n                  <>\n                    <div className=\"blogText\">{blog.excerpt}</div>\n                  <Button variant=\"contained\" className={classes.LoginButton}>\n                      <Link href='/auth/login'>Login to read more</Link>\n                    </Button>\n                  </>\n              }\n            </section>\n          </div>\n          <div style={{ marginBottom: 15,marginTop:20 }}>\n            <div style={{ marginBottom: 15 }}>{showBlogCategories(blog)}\n            </div>\n            <div>\n              {showBlogTags(blog)}\n            </div>\n            <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',marginTop:15}}>\n              <div style={{display:'flex',alignItems:'center',justifyContent:'flex-start'}}>\n              <div \n              style={{ width: 55, height: 55, borderRadius: '50%', border: '1px solid lightgray' ,display:'flex',alignItems:'center',justifyContent:'center'}} className=\"d-flex align-items-center justify-content-center\">\n               <GradeIcon/>\n              </div>\n              <p style={{marginLeft : 15}}>1 star</p>\n              </div>\n            <div>\n              <Button>\n                <a href={`http://twitter.com/share?${DOMAIN}/blogs/${blog.slug}`} target=\"_blank\">Twitter</a>\n              </Button>\n              <Button>\n                  <a href={`https://www.facebook.com/sharer/sharer.php?u=${DOMAIN}/blogs/${blog.slug}`} target=\"_blank\">Facebook</a>\n              </Button>\n              <Button>  \n                <a href={`https://www.linkedin.com/sharing/share-offsite/?url=${DOMAIN}/blogs/${blog.slug}`} target=\"_blank\">Linkedin</a></Button>\n            </div>\n            </div>\n          </div>\n         </Grid>\n          <Hidden mdDown>\n          <Grid item lg={3}>\n          </Grid>\n          </Hidden>\n        </Grid>\n        <div className=\"\">\n            <h4>Related blogs</h4>\n            <Grid container spacing={3}>\n              {showRelatedBlog()}\n            </Grid>\n          </div>\n        {showDisqusThread()}\n      </Layout>\n    </>\n  );\n}\n\nSinglePage.getInitialProps = (ctx) => {\n\n  const token = ctx.cookie.get('token')\n  if (token) {\n    return singleBlog(token, ctx.query.slug)\n      .then(data => {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          return {\n            blog: data, query: ctx.query\n          };\n        }\n      });\n  } else {\n    return singleBlogPart(ctx.query.slug).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        return {\n          blog: data, query: ctx.query\n        };\n      }\n    });\n  }\n\n};\nexport default withCookie(withRouter(SinglePage))"]},"metadata":{},"sourceType":"module"}