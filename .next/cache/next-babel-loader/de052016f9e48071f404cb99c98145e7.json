{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/components/blog/Write.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { getCookie } from '../../actions/auth';\nimport { getCategories } from '../../actions/category';\nimport { getTags } from '../../actions/tag';\nimport { createBlog, searchList } from '../../actions/blog';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Link from '../../src/Link';\nimport Chip from '@material-ui/core/Chip';\nimport Countable from 'countable';\nimport dynamic from 'next/dynamic';\nvar ReactQuill = dynamic(function () {\n  return import('react-quill');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react-quill')];\n    },\n    modules: ['react-quill']\n  }\n});\nimport '../../node_modules/react-quill/dist/quill.snow.css';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    container: {\n      flex: 1,\n      display: 'flex',\n      flexWrap: 'wrap',\n      flexDirection: 'column',\n      alignItems: 'stretch',\n      justifyContent: 'flex-start'\n    },\n    textInputHolder: {\n      display: 'flex',\n      position: 'relative'\n    },\n    textField: {\n      marginBottom: 0,\n      flex: 1\n    },\n    searchResultHolder: {\n      width: '100%',\n      minHeight: 100,\n      background: 'yellow',\n      position: 'absolute',\n      top: '100%',\n      zIndex: 99\n    },\n    button: {\n      margin: theme.spacing(1),\n      marginLeft: 0\n    },\n    paper: {\n      padding: theme.spacing(2),\n      textAlign: 'center',\n      color: theme.palette.text.secondary\n    }\n  };\n});\n\nvar CreateBlog = function CreateBlog() {\n  var classes = useStyles();\n\n  var _useState = useState({\n    title: '',\n    error: false,\n    success: false,\n    formData: '',\n    photo: '',\n    timeToRead: 0\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var _useState2 = useState([]),\n      searchResult = _useState2[0],\n      setSearchResult = _useState2[1];\n\n  var _useState3 = useState([]),\n      categories = _useState3[0],\n      setCategories = _useState3[1];\n\n  var _useState4 = useState([]),\n      tags = _useState4[0],\n      setTags = _useState4[1];\n\n  var _useState5 = useState([]),\n      checkedCategories = _useState5[0],\n      setCheckedCategories = _useState5[1]; // categories\n\n\n  var _useState6 = useState([]),\n      checkedTag = _useState6[0],\n      setCheckedTags = _useState6[1]; // tags\n\n\n  var error = values.error,\n      success = values.success,\n      formData = values.formData,\n      photo = values.photo,\n      title = values.title,\n      timeToRead = values.timeToRead;\n  var token = getCookie('token');\n\n  var blogFromLocalStorage = function blogFromLocalStorage() {\n    if (false) {\n      return false;\n    } else {\n      if (localStorage.getItem('blog')) {\n        return JSON.parse(localStorage.getItem('blog'));\n      } else {\n        return false;\n      }\n    }\n  };\n\n  var _useState7 = useState(blogFromLocalStorage()),\n      body = _useState7[0],\n      setBody = _useState7[1];\n\n  var initCategories = function initCategories() {\n    getCategories().then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n\n  var initTags = function initTags() {\n    getTags().then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setTags(data);\n      }\n    });\n  };\n\n  useEffect(function () {\n    setValues(_objectSpread({}, values, {\n      formData: new FormData()\n    }));\n    initCategories();\n    initTags();\n  }, []);\n\n  var handleChange = function handleChange(e) {\n    var _objectSpread2;\n\n    var value = e.target.name === 'photo' ? e.target.files[0] : e.target.value;\n    formData.set(e.target.name, value);\n    setValues(_objectSpread({}, values, (_objectSpread2 = {}, _defineProperty(_objectSpread2, e.target.name, value), _defineProperty(_objectSpread2, \"formData\", formData), _defineProperty(_objectSpread2, \"error\", ''), _objectSpread2)));\n    e.target.name !== 'photo' && value.length % 4 === 0 && searchList({\n      value: value\n    }).then(function (res) {\n      return setSearchResult(res);\n    });\n  };\n\n  var handleBody = function handleBody(e) {\n    setBody(e);\n    Countable.count(e, function (x) {\n      var seconds = x.all / 360 * 6;\n      var minutes = Math.ceil(seconds / 40);\n      formData.set('body', e);\n      formData.set('timeToRead', minutes);\n      setValues(_objectSpread({}, values, {\n        timeToRead: minutes\n      }));\n    });\n\n    if (true) {\n      localStorage.setItem('blog', _JSON$stringify(e));\n    }\n  };\n\n  var handleToggle = function handleToggle(c) {\n    return function () {\n      setValues(_objectSpread({}, values, {\n        error: ''\n      })); // return the first index or -1\n\n      var clickedCategory = checkedCategories.indexOf(c);\n\n      var all = _toConsumableArray(checkedCategories);\n\n      if (clickedCategory === -1) {\n        all.push(c);\n      } else {\n        all.splice(clickedCategory, 1);\n      }\n\n      setCheckedCategories(all);\n      formData.set('categories', all);\n    };\n  };\n\n  var handleTagsToggle = function handleTagsToggle(t) {\n    return function () {\n      setValues(_objectSpread({}, values, {\n        error: ''\n      })); // return the first index or -1\n\n      var clickedTag = checkedTag.indexOf(t);\n\n      var all = _toConsumableArray(checkedTag);\n\n      if (clickedTag === -1) {\n        all.push(t);\n      } else {\n        all.splice(clickedTag, 1);\n      }\n\n      setCheckedTags(all);\n      formData.set('tags', all);\n    };\n  };\n\n  var publishBlog = function publishBlog(e) {\n    e.preventDefault();\n    createBlog(formData, token).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread({}, values, {\n          title: '',\n          error: '',\n          photo: '',\n          success: \"A new blog titled \\\"\".concat(data.title, \"\\\" is created\")\n        }));\n        setBody('');\n        setCheckedCategories([]);\n        setCheckedTags([]);\n      }\n    });\n  };\n\n  var createBlogForm = function createBlogForm() {\n    return __jsx(React.Fragment, null, __jsx(\"form\", {\n      className: classes.container,\n      onSubmit: publishBlog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.textInputHolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, __jsx(TextField, {\n      id: \"outlined-basic\",\n      className: classes.textField,\n      label: \"Title\",\n      margin: \"normal\",\n      name: \"title\",\n      variant: \"outlined\",\n      onChange: handleChange,\n      autoComplete: \"off\",\n      value: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), title && searchResult.length > 0 && __jsx(\"div\", {\n      className: classes.searchResultHolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, searchResult.map(function (result, i) {\n      return __jsx(\"div\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \" \", __jsx(Link, {\n        href: \"/blogs/\".concat(result.slug),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, result.title), \" \");\n    }))), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        flexWrap: 'wrap'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      accept: \"image/*\",\n      className: classes.input,\n      style: {\n        display: 'none'\n      },\n      id: \"contained-button-file\",\n      onChange: handleChange,\n      multiple: true,\n      type: \"file\",\n      name: \"photo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), __jsx(\"label\", {\n      htmlFor: \"contained-button-file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, __jsx(Button, {\n      variant: \"contained\",\n      component: \"span\",\n      className: classes.button,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \" Upload Image\")), photo.name ? __jsx(Chip, {\n      label: photo.name,\n      onDelete: function onDelete() {\n        return setValues(_objectSpread({}, values, {\n          photo: ''\n        }));\n      },\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }) : __jsx(\"small\", {\n      className: \"text-muted m-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Max size: 1mb\")), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"time to read : \", timeToRead), __jsx(\"div\", {\n      style: {\n        flex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, __jsx(ReactQuill, {\n      modules: CreateBlog.modules,\n      formats: CreateBlog.formats,\n      value: body,\n      placeholder: \"type something amazing\",\n      onChange: handleBody,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, __jsx(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Categories\"), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, showCategories())), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, __jsx(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Tags\"), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, showTags())), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, __jsx(Button, {\n      variant: \"contained\",\n      className: classes.button,\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"Publish\"))));\n  };\n\n  var showCategories = function showCategories() {\n    return categories && categories.map(function (c, i) {\n      return __jsx(FormControlLabel, {\n        key: i,\n        control: __jsx(Checkbox, {\n          onChange: handleToggle(c._id),\n          checked: checkedCategories.indexOf(c._id) !== -1,\n          inputProps: {\n            'aria-label': 'primary checkbox'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }),\n        label: c.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      });\n    });\n  };\n\n  var showTags = function showTags() {\n    return tags && tags.map(function (t, i) {\n      return __jsx(FormControlLabel, {\n        key: i,\n        control: __jsx(Checkbox, {\n          onChange: handleTagsToggle(t._id),\n          checked: checkedTag.indexOf(t._id) !== -1,\n          inputProps: {\n            'aria-label': 'primary checkbox'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }),\n        label: t.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      });\n    });\n  };\n\n  var showError = function showError() {\n    return __jsx(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? '' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, error);\n  };\n\n  var showSuccess = function showSuccess() {\n    return __jsx(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? '' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, success);\n  };\n\n  return __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    alignItems: \"stretch\",\n    style: {\n      flex: 1,\n      display: 'flex'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    sm: 12,\n    md: 8,\n    style: {\n      flex: 1,\n      flexWrap: 'wrap'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }, __jsx(Paper, {\n    className: classes.paper,\n    style: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'stretch'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }, showError(), showSuccess()), createBlogForm())));\n};\n\nCreateBlog.modules = {\n  toolbar: [[{\n    header: '1'\n  }, {\n    header: '2'\n  }, {\n    header: [3, 4, 5, 6]\n  }, {\n    font: []\n  }], [{\n    size: []\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }], ['link', 'image', 'video'], ['clean'], ['code-block'], ['background']]\n};\nCreateBlog.formats = ['header', 'font', 'size', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'link', 'image', 'video', 'code-block', 'background'];\nexport default CreateBlog;","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/components/blog/Write.jsx"],"names":["React","useEffect","useState","getCookie","getCategories","getTags","createBlog","searchList","makeStyles","TextField","Button","Checkbox","FormControlLabel","Paper","Grid","Link","Chip","Countable","dynamic","ReactQuill","ssr","useStyles","theme","container","flex","display","flexWrap","flexDirection","alignItems","justifyContent","textInputHolder","position","textField","marginBottom","searchResultHolder","width","minHeight","background","top","zIndex","button","margin","spacing","marginLeft","paper","padding","textAlign","color","palette","text","secondary","CreateBlog","classes","title","error","success","formData","photo","timeToRead","values","setValues","searchResult","setSearchResult","categories","setCategories","tags","setTags","checkedCategories","setCheckedCategories","checkedTag","setCheckedTags","token","blogFromLocalStorage","localStorage","getItem","JSON","parse","body","setBody","initCategories","then","data","initTags","FormData","handleChange","e","value","target","name","files","set","length","res","handleBody","count","x","seconds","all","minutes","Math","ceil","setItem","handleToggle","c","clickedCategory","indexOf","push","splice","handleTagsToggle","t","clickedTag","publishBlog","preventDefault","createBlogForm","map","result","i","slug","input","modules","formats","showCategories","showTags","_id","showError","showSuccess","height","toolbar","header","font","size","list"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { getCookie } from '../../actions/auth'\nimport { getCategories } from '../../actions/category'\nimport { getTags } from '../../actions/tag'\nimport { createBlog, searchList } from '../../actions/blog'\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport  Link  from '../../src/Link'\nimport Chip from '@material-ui/core/Chip';\nimport Countable from 'countable'\nimport dynamic from 'next/dynamic'\nconst ReactQuill = dynamic(() => import('react-quill'), { ssr: false })\nimport '../../node_modules/react-quill/dist/quill.snow.css'\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    flex: 1,\n    display: 'flex',\n    flexWrap: 'wrap',\n    flexDirection: 'column',\n    alignItems: 'stretch',\n    justifyContent: 'flex-start'\n  },\n  textInputHolder: {\n    display: 'flex',\n    position: 'relative',\n  },\n  textField: {\n    marginBottom: 0,\n    flex: 1,\n  },\n  searchResultHolder: {\n    width: '100%',\n    minHeight: 100,\n    background: 'yellow',\n    position: 'absolute',\n    top: '100%',\n    zIndex: 99\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  }\n}));\nconst CreateBlog = () => {\n  const classes = useStyles();\n  const [values, setValues] = useState({ title: '', error: false, success: false, formData: '', photo: '', timeToRead: 0 })\n  const [searchResult, setSearchResult] = useState([])\n  const [categories, setCategories] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [checkedCategories, setCheckedCategories] = useState([]); // categories\n  const [checkedTag, setCheckedTags] = useState([]); // tags\n  const { error, success, formData, photo, title, timeToRead } = values\n  const token = getCookie('token');\n  const blogFromLocalStorage = () => {\n    if (typeof window === 'undefined') {\n      return false\n    } else {\n      if (localStorage.getItem('blog')) {\n        return JSON.parse(localStorage.getItem('blog'))\n      } else {\n        return false\n      }\n    }\n  }\n  const [body, setBody] = useState(blogFromLocalStorage())\n  const initCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n  const initTags = () => {\n    getTags().then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setTags(data);\n      }\n    });\n  };\n  useEffect(() => {\n    setValues({ ...values, formData: new FormData() })\n    initCategories();\n    initTags();\n  }, [])\n  const handleChange = (e) => {\n    const value = e.target.name === 'photo' ? e.target.files[0] : e.target.value\n    formData.set(e.target.name, value)\n\n    setValues({ ...values, [e.target.name]: value, formData, error: '' })\n    e.target.name !== 'photo' && value.length % 4 === 0 && searchList({ value }).then(res => setSearchResult(res))\n  }\n  const handleBody = (e) => {\n    setBody(e);\n    Countable.count(e, (x) => {\n      let seconds = x.all / 360 * 6;\n      let minutes = Math.ceil(seconds / 40);\n      formData.set('body', e);\n      formData.set('timeToRead', minutes)\n      setValues({ ...values, timeToRead: minutes })\n    })\n\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('blog', JSON.stringify(e))\n    }\n  }\n  const handleToggle = c => () => {\n    setValues({ ...values, error: '' });\n    // return the first index or -1\n    const clickedCategory = checkedCategories.indexOf(c);\n    const all = [...checkedCategories];\n\n    if (clickedCategory === -1) {\n      all.push(c);\n    } else {\n      all.splice(clickedCategory, 1);\n    }\n    setCheckedCategories(all);\n    formData.set('categories', all);\n  };\n  const handleTagsToggle = t => () => {\n    setValues({ ...values, error: '' });\n    // return the first index or -1\n    const clickedTag = checkedTag.indexOf(t);\n    const all = [...checkedTag];\n\n    if (clickedTag === -1) {\n      all.push(t);\n    } else {\n      all.splice(clickedTag, 1);\n    }\n    setCheckedTags(all);\n    formData.set('tags', all);\n  };\n  const publishBlog = (e) => {\n    e.preventDefault()\n    createBlog(formData, token).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({ ...values, title: '', error: '', photo: '', success: `A new blog titled \"${data.title}\" is created` });\n        setBody('');\n        setCheckedCategories([]);\n        setCheckedTags([]);\n      }\n    });\n  }\n  const createBlogForm = () => {\n    return (\n      <>\n        <form className={classes.container} onSubmit={publishBlog} >\n          <div className={classes.textInputHolder}>\n            <TextField\n              id=\"outlined-basic\"\n              className={classes.textField}\n              label=\"Title\"\n              margin=\"normal\"\n              name=\"title\"\n              variant=\"outlined\"\n              onChange={handleChange}\n              autoComplete='off'\n              value={title}\n            />\n            {title && searchResult.length > 0 && <div className={classes.searchResultHolder}>\n              {searchResult.map((result, i) => <div key={i}> <Link href={`/blogs/${result.slug}`}>{result.title}</Link> </div>)}\n            </div>}\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap' }}>\n            <input\n              accept=\"image/*\"\n              className={classes.input}\n              style={{ display: 'none' }}\n              id=\"contained-button-file\"\n              onChange={handleChange}\n              multiple\n              type=\"file\"\n              name=\"photo\"\n            />\n            <label htmlFor=\"contained-button-file\">\n              <Button variant=\"contained\" component=\"span\" className={classes.button}> Upload Image</Button>\n            </label>\n            {photo.name ? <Chip label={photo.name} onDelete={() => setValues({ ...values, photo: '' })} color=\"primary\" /> : <small className=\"text-muted m-3\">Max size: 1mb</small>}\n\n          </div>\n          <div>time to read : {timeToRead}</div>\n          <div style={{ flex: 1 }}>\n            <ReactQuill modules={CreateBlog.modules} formats={CreateBlog.formats} value={body} placeholder=\"type something amazing\" onChange={handleBody} />\n          </div>\n          <div>\n            <h5>Categories</h5>\n            <div style={{ display: 'flex', flexDirection: 'column' }}>{showCategories()}</div>\n          </div>\n          <div>\n            <h5>Tags</h5>\n            <div style={{ display: 'flex', flexDirection: 'column' }}>{showTags()}</div>\n          </div>\n          <div>\n            <Button variant=\"contained\" className={classes.button} type=\"submit\">Publish</Button>\n          </div>\n        </form>\n      </>\n    )\n  }\n  const showCategories = () => {\n    return (\n      categories &&\n      categories.map((c, i) => (\n        <FormControlLabel key={i} control={\n          <Checkbox\n            onChange={handleToggle(c._id)}\n            checked={checkedCategories.indexOf(c._id) !== -1}\n            inputProps={{\n              'aria-label': 'primary checkbox',\n            }}\n\n          />}\n          label={c.name}\n        />\n      ))\n    );\n  };\n\n  const showTags = () => {\n    return (\n      tags &&\n      tags.map((t, i) => (\n        <FormControlLabel key={i} control={\n          <Checkbox\n            onChange={handleTagsToggle(t._id)}\n            checked={checkedTag.indexOf(t._id) !== -1}\n            inputProps={{\n              'aria-label': 'primary checkbox',\n            }}\n\n          />}\n          label={t.name}\n        />\n      ))\n    );\n  };\n  const showError = () => (\n    <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\n      {error}\n    </div>\n  );\n\n  const showSuccess = () => (\n    <div className=\"alert alert-success\" style={{ display: success ? '' : 'none' }}>\n      {success}\n    </div>\n  );\n\n\n  return (\n    <Grid container spacing={3} alignItems=\"stretch\" style={{ flex: 1, display: 'flex' }}>\n      <Grid item sm={12} md={8} style={{ flex: 1, flexWrap: 'wrap' }}>\n        <Paper className={classes.paper} style={{ height: '100%', display: 'flex', flexDirection: 'column', alignItems: 'stretch' }}>\n          <div>\n            {showError()}\n            {showSuccess()}\n          </div>\n          {createBlogForm()}\n        </Paper>\n      </Grid>\n    </Grid>\n\n  )\n}\nCreateBlog.modules = {\n  toolbar: [\n    [{ header: '1' }, { header: '2' }, { header: [3, 4, 5, 6] }, { font: [] }],\n    [{ size: [] }],\n    ['bold', 'italic', 'underline', 'strike', 'blockquote',],\n    [{ list: 'ordered' }, { list: 'bullet' }],\n    ['link', 'image', 'video'],\n    ['clean'],\n    ['code-block'],\n    ['background']\n  ]\n}\nCreateBlog.formats = [\n  'header',\n  'font',\n  'size',\n  'bold',\n  'italic',\n  'underline',\n  'strike',\n  'blockquote',\n  'list',\n  'bullet',\n  'link',\n  'image',\n  'video',\n  'code-block',\n  'background'\n]\n\nexport default CreateBlog;"]},"metadata":{},"sourceType":"module"}