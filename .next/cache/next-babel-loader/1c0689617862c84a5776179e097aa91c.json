{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nvar _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/components/admin/analysers/CategoriesAnalyser.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport { getCategories } from '../../../actions/category';\nimport { getCategoriesData } from '../../../actions/admin';\nimport { getCookie } from '../../../actions/auth';\nimport { Doughnut } from 'react-chartjs-2';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport ColorHash from 'color-hash';\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  }\n}));\nexport default (() => {\n  const colorHash = new ColorHash({\n    hue: [{\n      min: 30,\n      max: 90\n    }, {\n      min: 180,\n      max: 210\n    }, {\n      min: 270,\n      max: 285\n    }]\n  });\n  const classes = useStyles();\n  const [month_, setMonth] = React.useState(11);\n  const [year_, setYear] = React.useState(2019);\n  const {\n    0: chartData,\n    1: setChartData\n  } = useState([]);\n  const token = getCookie('token');\n  useEffect(() => {\n    getCategories().then(catagories => {\n      if (catagories.error) {\n        return console.log(catagories.error);\n      }\n\n      return catagories;\n    }).then(catagories => {\n      if (catagories) {\n        getCategoriesData(token, month_, year_).then(res => {\n          if (res.error) {\n            console.log(res.error);\n          } else {\n            const result = [res, catagories].reduce((a, b) => a.map((c, i) => _Object$assign({}, c, b[i])));\n            setChartData(result);\n          }\n        });\n      }\n    });\n  }, [month_, year_]);\n  return __jsx(React.Fragment, null, __jsx(Doughnut, {\n    data: {\n      labels: chartData.map(({\n        name\n      }, i) => name),\n      datasets: [{\n        data: chartData.map(({\n          count\n        }, i) => count),\n        backgroundColor: chartData.map(({\n          name,\n          _id\n        }, i) => colorHash.hex(name + '2D')),\n        hoverBackgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']\n      }]\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), __jsx(FormControl, {\n    className: classes.formControl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(InputLabel, {\n    id: \"demo-simple-select-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"chose Month\"), __jsx(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    value: month_,\n    onChange: event => setMonth(_parseInt(event.target.value)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].map((month, i) => __jsx(MenuItem, {\n    key: i,\n    value: i + 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, month)))), __jsx(FormControl, {\n    className: classes.formControl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, __jsx(InputLabel, {\n    id: \"demo-simple-select-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"chose Month\"), __jsx(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    value: year_,\n    onChange: event => setYear(_parseInt(event.target.value)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, Array(10).fill('').map((month, i) => __jsx(MenuItem, {\n    key: i,\n    value: 2019 + i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, 2019 + i)))));\n});","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/components/admin/analysers/CategoriesAnalyser.jsx"],"names":["useState","useEffect","getCategories","getCategoriesData","getCookie","Doughnut","makeStyles","InputLabel","MenuItem","FormControl","Select","ColorHash","useStyles","theme","formControl","margin","spacing","minWidth","selectEmpty","marginTop","colorHash","hue","min","max","classes","month_","setMonth","React","year_","setYear","chartData","setChartData","token","then","catagories","error","console","log","res","result","reduce","a","b","map","c","i","labels","name","datasets","data","count","backgroundColor","_id","hex","hoverBackgroundColor","event","target","value","month","Array","fill"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { getCategories } from '../../../actions/category'\nimport { getCategoriesData } from '../../../actions/admin'\nimport { getCookie } from '../../../actions/auth'\nimport {Doughnut} from 'react-chartjs-2';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport ColorHash from 'color-hash'\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\nexport default () => {\n    const colorHash = new ColorHash({ hue: [{ min: 30, max: 90 }, { min: 180, max: 210 }, { min: 270, max: 285 }] });\n  const classes = useStyles();\n  const [month_, setMonth] = React.useState(11);\n  const [year_, setYear] = React.useState(2019);\n  const [chartData, setChartData] = useState([])\n  const token = getCookie('token')\n  useEffect(() => {\n    getCategories().then(catagories => {\n      if (catagories.error) {\n        return console.log(catagories.error)\n      }\n      return catagories\n    }).then(catagories => { \n      if (catagories) { \n        getCategoriesData(token, month_, year_).then((res) => { \n          if (res.error) {\n            console.log(res.error)\n          }\n          else { \n            const result = [res, catagories].reduce((a, b) => a.map((c, i) => Object.assign({}, c, b[i])));\n            setChartData(result)\n          }\n        })\n      }\n    })\n  }, [month_, year_])\n  return (\n    <>\n      <Doughnut data={{\n\tlabels: chartData.map(({name},i)=>name),\n\tdatasets: [{\n\t\tdata:chartData.map(({count},i)=>count),\n\t\tbackgroundColor:  chartData.map(({ name, _id }, i) => colorHash.hex(name+'2D')),\n\t\thoverBackgroundColor: [\n\t\t'#FF6384',\n\t\t'#36A2EB',\n\t\t'#FFCE56'\n\t\t]\n\t}]\n}} />\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"demo-simple-select-label\">chose Month</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={month_}\n          onChange={(event) => setMonth(parseInt(event.target.value))}\n        >\n          {['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].map((month, i) => <MenuItem key={i} value={i + 1}>{month}</MenuItem>)}\n        </Select>\n      </FormControl>\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"demo-simple-select-label\">chose Month</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={year_}\n          onChange={(event) => setYear(parseInt(event.target.value))}\n        >\n          {Array(10).fill('').map((month, i) => <MenuItem key={i} value={2019 + i}>{2019 + i}</MenuItem>)}\n        </Select>\n      </FormControl>\n    </>\n  )\n};"]},"metadata":{},"sourceType":"module"}