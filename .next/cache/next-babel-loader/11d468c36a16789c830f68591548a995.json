{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/pages/blogs/index.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport Head from 'next/head';\nimport { withRouter } from 'next/router';\nimport { getCookie } from '../../actions/auth';\nimport Layout from '../../components/Layout';\nimport Card from '../../components/blog/layout/Card';\nimport { listBlogWithCategoriesTags } from \"../../actions/blog\";\nimport { DOMAIN, NAME, FB_APP_ID_ } from \"../../config\";\nimport { Cookie, withCookie } from 'next-cookie';\n\nvar Blogs = function Blogs(_ref) {\n  var _ref$blogs = _ref.blogs,\n      blogs = _ref$blogs === void 0 ? [] : _ref$blogs,\n      totalBlogs = _ref.totalBlogs,\n      blogsLimit = _ref.blogsLimit,\n      blogsSkip = _ref.blogsSkip,\n      router = _ref.router;\n\n  var _useState = useState(blogsLimit),\n      limit = _useState[0],\n      setLimit = _useState[1];\n\n  var _useState2 = useState(blogsSkip),\n      skip = _useState2[0],\n      setSkip = _useState2[1];\n\n  var _useState3 = useState(totalBlogs),\n      size = _useState3[0],\n      setSize = _useState3[1];\n\n  var _useState4 = useState([]),\n      loadedBlogs = _useState4[0],\n      setLoadedBlogs = _useState4[1];\n\n  var token = getCookie('token');\n\n  var head = function head() {\n    return __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    }, \"Programming blogs | \", NAME), __jsx(\"meta\", {\n      name: \"description\",\n      content: \"Programming blogs and tutorials on react node next vue php laravel and web developoment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    }), __jsx(\"link\", {\n      rel: \"canonical\",\n      href: \"\".concat(DOMAIN).concat(router.pathname),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:title\",\n      content: \"Latest web developoment tutorials | \".concat(NAME),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:description\",\n      content: \"Programming blogs and tutorials on react node next vue php laravel and web developoment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:type\",\n      content: \"webiste\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:url\",\n      content: \"\".concat(DOMAIN).concat(router.pathname),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:site_name\",\n      content: \"\".concat(NAME),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:image\",\n      content: \"\".concat(DOMAIN, \"/static/images/seoblog.jpg\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:image:secure_url\",\n      ccontent: \"\".concat(DOMAIN, \"/static/images/seoblog.jpg\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:image:type\",\n      content: \"image/jpg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"fb:app_id\",\n      content: \"\".concat(FB_APP_ID_),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }));\n  };\n\n  var showAllBlogs = function showAllBlogs() {\n    return blogs.map(function (blog, i) {\n      return __jsx(\"div\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, __jsx(Card, {\n        blog: blog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }));\n    });\n  };\n\n  var loadMore = function loadMore() {\n    var toSkip = skip + limit;\n    listBlogWithCategoriesTags(token, skip, limit).then(function (data) {\n      if (data.error) {\n        console.log(error);\n      }\n\n      setLoadedBlogs([].concat(_toConsumableArray(loadedBlogs), _toConsumableArray(data.blogs)));\n      setSize(data.size);\n      setSkip(toSkip);\n    });\n  };\n\n  var loadMoreButton = function loadMoreButton() {\n    return size > 0 && size >= limit && __jsx(\"button\", {\n      onClick: loadMore,\n      className: \"btn btn-outline-primary btn-lg w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"load more\");\n  };\n\n  var showLoadedBlogs = function showLoadedBlogs() {\n    return loadedBlogs.map(function (blog, i) {\n      return __jsx(\"article\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, __jsx(Card, {\n        blog: blog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }));\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(React.Fragment, null, head(), __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, __jsx(\"main\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, showAllBlogs()), __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, showLoadedBlogs()), __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"text-center pt-5 pb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, loadMoreButton()))))));\n};\n\nBlogs.getInitialProps = function (ctx) {\n  var skip = 0;\n  var limit = 5;\n  var token = ctx.cookie.get('token');\n  console.log('1');\n  return listBlogWithCategoriesTags(token || ctx.query.token, skip, limit).then(function (data) {\n    if (data.error) {\n      console.log(data.error);\n    } else {\n      console.log(data);\n      return {\n        blogs: data.blogs,\n        categories: data.categories,\n        tags: data.tags,\n        totalBlogs: data.size,\n        blogsLimit: limit,\n        blogsSkip: skip\n      };\n    }\n  });\n};\n\nexport default withCookie(withRouter(Blogs));","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/pages/blogs/index.jsx"],"names":["useState","Head","withRouter","getCookie","Layout","Card","listBlogWithCategoriesTags","DOMAIN","NAME","FB_APP_ID_","Cookie","withCookie","Blogs","blogs","totalBlogs","blogsLimit","blogsSkip","router","limit","setLimit","skip","setSkip","size","setSize","loadedBlogs","setLoadedBlogs","token","head","pathname","showAllBlogs","map","blog","i","loadMore","toSkip","then","data","error","console","log","loadMoreButton","showLoadedBlogs","getInitialProps","ctx","cookie","get","query","categories","tags"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport Head from 'next/head'\nimport { withRouter } from 'next/router'\nimport { getCookie } from '../../actions/auth'\nimport Layout from '../../components/Layout'\nimport Card from '../../components/blog/layout/Card'\nimport { listBlogWithCategoriesTags } from \"../../actions/blog\";\nimport { DOMAIN, NAME, FB_APP_ID_ } from \"../../config\";\nimport { Cookie, withCookie } from 'next-cookie'\n\nconst Blogs = ({ blogs = [], totalBlogs, blogsLimit, blogsSkip, router }) => {\n  const [limit, setLimit] = useState(blogsLimit)\n  const [skip, setSkip] = useState(blogsSkip)\n  const [size, setSize] = useState(totalBlogs)\n  const [loadedBlogs, setLoadedBlogs] = useState([])\n  const token = getCookie('token');\n\n  const head = () => {\n    return <Head>\n      <title>Programming blogs | {NAME}</title>\n      <meta\n        name=\"description\"\n        content=\"Programming blogs and tutorials on react node next vue php laravel and web developoment\"\n      />\n      <link rel=\"canonical\" href={`${DOMAIN}${router.pathname}`} />\n      <meta property=\"og:title\" content={`Latest web developoment tutorials | ${NAME}`} />\n      <meta\n        property=\"og:description\"\n        content=\"Programming blogs and tutorials on react node next vue php laravel and web developoment\"\n      />\n      <meta property=\"og:type\" content=\"webiste\" />\n      <meta property=\"og:url\" content={`${DOMAIN}${router.pathname}`} />\n      <meta property=\"og:site_name\" content={`${NAME}`} />\n\n      <meta property=\"og:image\" content={`${DOMAIN}/static/images/seoblog.jpg`} />\n      <meta property=\"og:image:secure_url\" ccontent={`${DOMAIN}/static/images/seoblog.jpg`} />\n      <meta property=\"og:image:type\" content=\"image/jpg\" />\n      <meta property=\"fb:app_id\" content={`${FB_APP_ID_}`} />\n    </Head>\n  }\n\n  const showAllBlogs = () => {\n    return blogs.map((blog, i) => {\n      return <div key={i}>\n        <Card blog={blog} />\n      </div>\n    })\n  }\n  const loadMore = () => {\n    let toSkip = skip + limit;\n    listBlogWithCategoriesTags(token, skip, limit).then((data) => {\n      if (data.error) {\n        console.log(error)\n      }\n      setLoadedBlogs([...loadedBlogs, ...data.blogs]);\n      setSize(data.size)\n      setSkip(toSkip)\n\n    })\n  }\n  const loadMoreButton = () => {\n    return (\n      size > 0 && size >= limit && (<button onClick={loadMore} className=\"btn btn-outline-primary btn-lg w-100\">load more</button>)\n    )\n  }\n  const showLoadedBlogs = () => {\n    return loadedBlogs.map((blog, i) => (\n      <article key={i}>\n        <Card blog={blog} />\n      </article>\n    ));\n  };\n  return (\n    <>\n      <>\n        {head()}\n        <Layout>\n          <main>\n            <div className=\"container\">\n              {showAllBlogs()}\n            </div>\n            <div className=\"container\">{showLoadedBlogs()}</div>\n            <div className=\"container\">\n              <div className=\"text-center pt-5 pb-5\">{loadMoreButton()}</div>\n            </div>\n\n          </main>\n        </Layout>\n      </>\n    </>\n  )\n}\nBlogs.getInitialProps = (ctx) => {\n  let skip = 0;\n  let limit = 5;\n  const token = ctx.cookie.get('token')\n  console.log('1')\n  return listBlogWithCategoriesTags(token || ctx.query.token, skip, limit)\n    .then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        console.log(data)\n        return {\n          blogs: data.blogs,\n          categories: data.categories,\n          tags: data.tags,\n          totalBlogs: data.size,\n          blogsLimit: limit,\n          blogsSkip: skip\n        };\n      }\n    });\n};\n\nexport default withCookie(withRouter(Blogs));"]},"metadata":{},"sourceType":"module"}