{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/baselmunawwar/Desktop/nextjs/firstApp/components/blog/Write.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { getCookie } from '../../actions/auth';\nimport { getCategories } from '../../actions/category';\nimport { getTags } from '../../actions/tag';\nimport { createBlog, searchList } from '../../actions/blog';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Link from '../../src/Link';\nimport Chip from '@material-ui/core/Chip';\nimport Countable from 'countable';\nimport dynamic from 'next/dynamic';\nconst ReactQuill = dynamic(() => import('react-quill'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('react-quill')],\n    modules: ['react-quill']\n  }\n});\nimport '../../node_modules/react-quill/dist/quill.snow.css';\nconst useStyles = makeStyles(theme => ({\n  container: {\n    flex: 1,\n    display: 'flex',\n    flexWrap: 'wrap',\n    flexDirection: 'column',\n    alignItems: 'stretch',\n    justifyContent: 'flex-start'\n  },\n  textInputHolder: {\n    display: 'flex',\n    position: 'relative'\n  },\n  textField: {\n    marginBottom: 0,\n    flex: 1\n  },\n  searchResultHolder: {\n    width: '100%',\n    minHeight: 100,\n    background: 'yellow',\n    position: 'absolute',\n    top: '100%',\n    zIndex: 99\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  }\n}));\n\nconst CreateBlog = () => {\n  const classes = useStyles();\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    title: '',\n    error: false,\n    success: false,\n    formData: '',\n    photo: '',\n    timeToRead: 0\n  });\n  const {\n    0: searchResult,\n    1: setSearchResult\n  } = useState([]);\n  const {\n    0: categories,\n    1: setCategories\n  } = useState([]);\n  const {\n    0: tags,\n    1: setTags\n  } = useState([]);\n  const {\n    0: checkedCategories,\n    1: setCheckedCategories\n  } = useState([]); // categories\n\n  const {\n    0: checkedTag,\n    1: setCheckedTags\n  } = useState([]); // tags\n\n  const {\n    error,\n    success,\n    formData,\n    photo,\n    title,\n    timeToRead\n  } = values;\n  const token = getCookie('token');\n\n  const blogFromLocalStorage = () => {\n    if (true) {\n      return false;\n    } else {\n      if (localStorage.getItem('blog')) {\n        return JSON.parse(localStorage.getItem('blog'));\n      } else {\n        return false;\n      }\n    }\n  };\n\n  const {\n    0: body,\n    1: setBody\n  } = useState(blogFromLocalStorage());\n\n  const initCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n\n  const initTags = () => {\n    getTags().then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setTags(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    setValues(_objectSpread({}, values, {\n      formData: new FormData()\n    }));\n    initCategories();\n    initTags();\n  }, []);\n\n  const handleChange = e => {\n    const value = e.target.name === 'photo' ? e.target.files[0] : e.target.value;\n    formData.set(e.target.name, value);\n    setValues(_objectSpread({}, values, {\n      [e.target.name]: value,\n      formData,\n      error: ''\n    }));\n    e.target.name !== 'photo' && value.length % 4 === 0 && searchList({\n      value\n    }).then(res => setSearchResult(res));\n  };\n\n  const handleBody = e => {\n    setBody(e);\n    Countable.count(e, x => {\n      let seconds = x.all / 360 * 6;\n      let minutes = Math.ceil(seconds / 40);\n      formData.set('body', e);\n      formData.set('timeToRead', minutes);\n      setValues(_objectSpread({}, values, {\n        timeToRead: minutes\n      }));\n    });\n\n    if (false) {\n      localStorage.setItem('blog', _JSON$stringify(e));\n    }\n  };\n\n  const handleToggle = c => () => {\n    setValues(_objectSpread({}, values, {\n      error: ''\n    })); // return the first index or -1\n\n    const clickedCategory = checkedCategories.indexOf(c);\n    const all = [...checkedCategories];\n\n    if (clickedCategory === -1) {\n      all.push(c);\n    } else {\n      all.splice(clickedCategory, 1);\n    }\n\n    setCheckedCategories(all);\n    formData.set('categories', all);\n  };\n\n  const handleTagsToggle = t => () => {\n    setValues(_objectSpread({}, values, {\n      error: ''\n    })); // return the first index or -1\n\n    const clickedTag = checkedTag.indexOf(t);\n    const all = [...checkedTag];\n\n    if (clickedTag === -1) {\n      all.push(t);\n    } else {\n      all.splice(clickedTag, 1);\n    }\n\n    setCheckedTags(all);\n    formData.set('tags', all);\n  };\n\n  const publishBlog = e => {\n    e.preventDefault();\n    createBlog(formData, token).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread({}, values, {\n          title: '',\n          error: '',\n          photo: '',\n          success: `A new blog titled \"${data.title}\" is created`\n        }));\n        setBody('');\n        setCheckedCategories([]);\n        setCheckedTags([]);\n      }\n    });\n  };\n\n  const createBlogForm = () => {\n    return __jsx(React.Fragment, null, __jsx(\"form\", {\n      className: classes.container,\n      onSubmit: publishBlog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.textInputHolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, __jsx(TextField, {\n      id: \"outlined-basic\",\n      className: classes.textField,\n      label: \"Title\",\n      margin: \"normal\",\n      name: \"title\",\n      variant: \"outlined\",\n      onChange: handleChange,\n      autoComplete: \"off\",\n      value: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), title && searchResult.length > 0 && __jsx(\"div\", {\n      className: classes.searchResultHolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, searchResult.map((result, i) => __jsx(\"div\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \" \", __jsx(Link, {\n      href: `/blogs/${result.slug}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, result.title), \" \")))), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        flexWrap: 'wrap'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      accept: \"image/*\",\n      className: classes.input,\n      style: {\n        display: 'none'\n      },\n      id: \"contained-button-file\",\n      onChange: handleChange,\n      multiple: true,\n      type: \"file\",\n      name: \"photo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), __jsx(\"label\", {\n      htmlFor: \"contained-button-file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, __jsx(Button, {\n      variant: \"contained\",\n      component: \"span\",\n      className: classes.button,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \" Upload Image\")), photo.name ? __jsx(Chip, {\n      label: photo.name,\n      onDelete: () => setValues(_objectSpread({}, values, {\n        photo: ''\n      })),\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }) : __jsx(\"small\", {\n      className: \"text-muted m-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Max size: 1mb\")), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"time to read : \", timeToRead), __jsx(\"div\", {\n      style: {\n        flex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, __jsx(ReactQuill, {\n      modules: CreateBlog.modules,\n      formats: CreateBlog.formats,\n      value: body,\n      placeholder: \"type something amazing\",\n      onChange: handleBody,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, __jsx(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Categories\"), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, showCategories())), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, __jsx(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Tags\"), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, showTags())), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, __jsx(Button, {\n      variant: \"contained\",\n      className: classes.button,\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"Publish\"))));\n  };\n\n  const showCategories = () => {\n    return categories && categories.map((c, i) => __jsx(FormControlLabel, {\n      key: i,\n      control: __jsx(Checkbox, {\n        onChange: handleToggle(c._id),\n        checked: checkedCategories.indexOf(c._id) !== -1,\n        inputProps: {\n          'aria-label': 'primary checkbox'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }),\n      label: c.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }));\n  };\n\n  const showTags = () => {\n    return tags && tags.map((t, i) => __jsx(FormControlLabel, {\n      key: i,\n      control: __jsx(Checkbox, {\n        onChange: handleTagsToggle(t._id),\n        checked: checkedTag.indexOf(t._id) !== -1,\n        inputProps: {\n          'aria-label': 'primary checkbox'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }),\n      label: t.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }));\n  };\n\n  const showError = () => __jsx(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }, error);\n\n  const showSuccess = () => __jsx(\"div\", {\n    className: \"alert alert-success\",\n    style: {\n      display: success ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, success);\n\n  return __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    alignItems: \"stretch\",\n    style: {\n      flex: 1,\n      display: 'flex'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    sm: 12,\n    md: 8,\n    style: {\n      flex: 1,\n      flexWrap: 'wrap'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }, __jsx(Paper, {\n    className: classes.paper,\n    style: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'stretch'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }, showError(), showSuccess()), createBlogForm())));\n};\n\nCreateBlog.modules = {\n  toolbar: [[{\n    header: '1'\n  }, {\n    header: '2'\n  }, {\n    header: [3, 4, 5, 6]\n  }, {\n    font: []\n  }], [{\n    size: []\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }], ['link', 'image', 'video'], ['clean'], ['code-block'], ['background']]\n};\nCreateBlog.formats = ['header', 'font', 'size', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'link', 'image', 'video', 'code-block', 'background'];\nexport default CreateBlog;","map":{"version":3,"sources":["/Users/baselmunawwar/Desktop/nextjs/firstApp/components/blog/Write.jsx"],"names":["React","useEffect","useState","getCookie","getCategories","getTags","createBlog","searchList","makeStyles","TextField","Button","Checkbox","FormControlLabel","Paper","Grid","Link","Chip","Countable","dynamic","ReactQuill","ssr","useStyles","theme","container","flex","display","flexWrap","flexDirection","alignItems","justifyContent","textInputHolder","position","textField","marginBottom","searchResultHolder","width","minHeight","background","top","zIndex","button","margin","spacing","marginLeft","paper","padding","textAlign","color","palette","text","secondary","CreateBlog","classes","values","setValues","title","error","success","formData","photo","timeToRead","searchResult","setSearchResult","categories","setCategories","tags","setTags","checkedCategories","setCheckedCategories","checkedTag","setCheckedTags","token","blogFromLocalStorage","localStorage","getItem","JSON","parse","body","setBody","initCategories","then","data","initTags","FormData","handleChange","e","value","target","name","files","set","length","res","handleBody","count","x","seconds","all","minutes","Math","ceil","setItem","handleToggle","c","clickedCategory","indexOf","push","splice","handleTagsToggle","t","clickedTag","publishBlog","preventDefault","createBlogForm","map","result","i","slug","input","modules","formats","showCategories","showTags","_id","showError","showSuccess","height","toolbar","header","font","size","list"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { getCookie } from '../../actions/auth'\nimport { getCategories } from '../../actions/category'\nimport { getTags } from '../../actions/tag'\nimport { createBlog, searchList } from '../../actions/blog'\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport  Link  from '../../src/Link'\nimport Chip from '@material-ui/core/Chip';\nimport Countable from 'countable'\nimport dynamic from 'next/dynamic'\nconst ReactQuill = dynamic(() => import('react-quill'), { ssr: false })\nimport '../../node_modules/react-quill/dist/quill.snow.css'\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    flex: 1,\n    display: 'flex',\n    flexWrap: 'wrap',\n    flexDirection: 'column',\n    alignItems: 'stretch',\n    justifyContent: 'flex-start'\n  },\n  textInputHolder: {\n    display: 'flex',\n    position: 'relative',\n  },\n  textField: {\n    marginBottom: 0,\n    flex: 1,\n  },\n  searchResultHolder: {\n    width: '100%',\n    minHeight: 100,\n    background: 'yellow',\n    position: 'absolute',\n    top: '100%',\n    zIndex: 99\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  }\n}));\nconst CreateBlog = () => {\n  const classes = useStyles();\n  const [values, setValues] = useState({ title: '', error: false, success: false, formData: '', photo: '', timeToRead: 0 })\n  const [searchResult, setSearchResult] = useState([])\n  const [categories, setCategories] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [checkedCategories, setCheckedCategories] = useState([]); // categories\n  const [checkedTag, setCheckedTags] = useState([]); // tags\n  const { error, success, formData, photo, title, timeToRead } = values\n  const token = getCookie('token');\n  const blogFromLocalStorage = () => {\n    if (typeof window === 'undefined') {\n      return false\n    } else {\n      if (localStorage.getItem('blog')) {\n        return JSON.parse(localStorage.getItem('blog'))\n      } else {\n        return false\n      }\n    }\n  }\n  const [body, setBody] = useState(blogFromLocalStorage())\n  const initCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n  const initTags = () => {\n    getTags().then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setTags(data);\n      }\n    });\n  };\n  useEffect(() => {\n    setValues({ ...values, formData: new FormData() })\n    initCategories();\n    initTags();\n  }, [])\n  const handleChange = (e) => {\n    const value = e.target.name === 'photo' ? e.target.files[0] : e.target.value\n    formData.set(e.target.name, value)\n\n    setValues({ ...values, [e.target.name]: value, formData, error: '' })\n    e.target.name !== 'photo' && value.length % 4 === 0 && searchList({ value }).then(res => setSearchResult(res))\n  }\n  const handleBody = (e) => {\n    setBody(e);\n    Countable.count(e, (x) => {\n      let seconds = x.all / 360 * 6;\n      let minutes = Math.ceil(seconds / 40);\n      formData.set('body', e);\n      formData.set('timeToRead', minutes)\n      setValues({ ...values, timeToRead: minutes })\n    })\n\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('blog', JSON.stringify(e))\n    }\n  }\n  const handleToggle = c => () => {\n    setValues({ ...values, error: '' });\n    // return the first index or -1\n    const clickedCategory = checkedCategories.indexOf(c);\n    const all = [...checkedCategories];\n\n    if (clickedCategory === -1) {\n      all.push(c);\n    } else {\n      all.splice(clickedCategory, 1);\n    }\n    setCheckedCategories(all);\n    formData.set('categories', all);\n  };\n  const handleTagsToggle = t => () => {\n    setValues({ ...values, error: '' });\n    // return the first index or -1\n    const clickedTag = checkedTag.indexOf(t);\n    const all = [...checkedTag];\n\n    if (clickedTag === -1) {\n      all.push(t);\n    } else {\n      all.splice(clickedTag, 1);\n    }\n    setCheckedTags(all);\n    formData.set('tags', all);\n  };\n  const publishBlog = (e) => {\n    e.preventDefault()\n    createBlog(formData, token).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({ ...values, title: '', error: '', photo: '', success: `A new blog titled \"${data.title}\" is created` });\n        setBody('');\n        setCheckedCategories([]);\n        setCheckedTags([]);\n      }\n    });\n  }\n  const createBlogForm = () => {\n    return (\n      <>\n        <form className={classes.container} onSubmit={publishBlog} >\n          <div className={classes.textInputHolder}>\n            <TextField\n              id=\"outlined-basic\"\n              className={classes.textField}\n              label=\"Title\"\n              margin=\"normal\"\n              name=\"title\"\n              variant=\"outlined\"\n              onChange={handleChange}\n              autoComplete='off'\n              value={title}\n            />\n            {title && searchResult.length > 0 && <div className={classes.searchResultHolder}>\n              {searchResult.map((result, i) => <div key={i}> <Link href={`/blogs/${result.slug}`}>{result.title}</Link> </div>)}\n            </div>}\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap' }}>\n            <input\n              accept=\"image/*\"\n              className={classes.input}\n              style={{ display: 'none' }}\n              id=\"contained-button-file\"\n              onChange={handleChange}\n              multiple\n              type=\"file\"\n              name=\"photo\"\n            />\n            <label htmlFor=\"contained-button-file\">\n              <Button variant=\"contained\" component=\"span\" className={classes.button}> Upload Image</Button>\n            </label>\n            {photo.name ? <Chip label={photo.name} onDelete={() => setValues({ ...values, photo: '' })} color=\"primary\" /> : <small className=\"text-muted m-3\">Max size: 1mb</small>}\n\n          </div>\n          <div>time to read : {timeToRead}</div>\n          <div style={{ flex: 1 }}>\n            <ReactQuill modules={CreateBlog.modules} formats={CreateBlog.formats} value={body} placeholder=\"type something amazing\" onChange={handleBody} />\n          </div>\n          <div>\n            <h5>Categories</h5>\n            <div style={{ display: 'flex', flexDirection: 'column' }}>{showCategories()}</div>\n          </div>\n          <div>\n            <h5>Tags</h5>\n            <div style={{ display: 'flex', flexDirection: 'column' }}>{showTags()}</div>\n          </div>\n          <div>\n            <Button variant=\"contained\" className={classes.button} type=\"submit\">Publish</Button>\n          </div>\n        </form>\n      </>\n    )\n  }\n  const showCategories = () => {\n    return (\n      categories &&\n      categories.map((c, i) => (\n        <FormControlLabel key={i} control={\n          <Checkbox\n            onChange={handleToggle(c._id)}\n            checked={checkedCategories.indexOf(c._id) !== -1}\n            inputProps={{\n              'aria-label': 'primary checkbox',\n            }}\n\n          />}\n          label={c.name}\n        />\n      ))\n    );\n  };\n\n  const showTags = () => {\n    return (\n      tags &&\n      tags.map((t, i) => (\n        <FormControlLabel key={i} control={\n          <Checkbox\n            onChange={handleTagsToggle(t._id)}\n            checked={checkedTag.indexOf(t._id) !== -1}\n            inputProps={{\n              'aria-label': 'primary checkbox',\n            }}\n\n          />}\n          label={t.name}\n        />\n      ))\n    );\n  };\n  const showError = () => (\n    <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\n      {error}\n    </div>\n  );\n\n  const showSuccess = () => (\n    <div className=\"alert alert-success\" style={{ display: success ? '' : 'none' }}>\n      {success}\n    </div>\n  );\n\n\n  return (\n    <Grid container spacing={3} alignItems=\"stretch\" style={{ flex: 1, display: 'flex' }}>\n      <Grid item sm={12} md={8} style={{ flex: 1, flexWrap: 'wrap' }}>\n        <Paper className={classes.paper} style={{ height: '100%', display: 'flex', flexDirection: 'column', alignItems: 'stretch' }}>\n          <div>\n            {showError()}\n            {showSuccess()}\n          </div>\n          {createBlogForm()}\n        </Paper>\n      </Grid>\n    </Grid>\n\n  )\n}\nCreateBlog.modules = {\n  toolbar: [\n    [{ header: '1' }, { header: '2' }, { header: [3, 4, 5, 6] }, { font: [] }],\n    [{ size: [] }],\n    ['bold', 'italic', 'underline', 'strike', 'blockquote',],\n    [{ list: 'ordered' }, { list: 'bullet' }],\n    ['link', 'image', 'video'],\n    ['clean'],\n    ['code-block'],\n    ['background']\n  ]\n}\nCreateBlog.formats = [\n  'header',\n  'font',\n  'size',\n  'bold',\n  'italic',\n  'underline',\n  'strike',\n  'blockquote',\n  'list',\n  'bullet',\n  'link',\n  'image',\n  'video',\n  'code-block',\n  'background'\n]\n\nexport default CreateBlog;"]},"metadata":{},"sourceType":"module"}